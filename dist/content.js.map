{"version":3,"file":"content.js","mappings":";;AAAA;AACA;AACA;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://kavach-trial/webpack/bootstrap","webpack://kavach-trial/webpack/runtime/make namespace object","webpack://kavach-trial/./src/content/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// Content script for detecting privacy policies and injecting tracking detection\nclass ContentScript {\n    constructor() {\n        this.privacyPolicyUrls = [];\n        console.log('üîç Kavach Content Script starting on:', window.location.href);\n        this.detectPrivacyPolicies();\n        this.injectTrackingDetector();\n        console.log('‚úÖ Kavach Content Script initialized');\n    }\n    detectPrivacyPolicies() {\n        // Look for privacy policy links with better detection\n        const selectors = [\n            'a[href*=\"privacy\"]',\n            'a[href*=\"terms\"]',\n            'a[href*=\"policy\"]',\n            'a[href*=\"legal\"]',\n            'a[href*=\"gdpr\"]',\n            'a[href*=\"ccpa\"]'\n        ];\n        const privacyKeywords = [\n            'privacy policy',\n            'privacy statement',\n            'privacy notice',\n            'terms of service',\n            'terms and conditions',\n            'data policy',\n            'cookie policy',\n            'legal',\n            'gdpr',\n            'ccpa'\n        ];\n        // Check link hrefs and text content\n        selectors.forEach(selector => {\n            const links = document.querySelectorAll(selector);\n            links.forEach(link => {\n                const href = link.href;\n                const text = link.textContent?.toLowerCase() || '';\n                if (href && !this.privacyPolicyUrls.includes(href)) {\n                    // Check if the link text contains privacy-related keywords\n                    const isPrivacyRelated = privacyKeywords.some(keyword => text.includes(keyword) || href.toLowerCase().includes(keyword));\n                    if (isPrivacyRelated) {\n                        this.privacyPolicyUrls.push(href);\n                    }\n                }\n            });\n        });\n        // Also check for common footer links\n        const footerElements = document.querySelectorAll('footer, .footer, [class*=\"footer\"]');\n        footerElements.forEach(footer => {\n            const links = footer.querySelectorAll('a');\n            links.forEach(link => {\n                const href = link.href;\n                const text = link.textContent?.toLowerCase() || '';\n                if (href && !this.privacyPolicyUrls.includes(href)) {\n                    const isPrivacyRelated = privacyKeywords.some(keyword => text.includes(keyword));\n                    if (isPrivacyRelated) {\n                        this.privacyPolicyUrls.push(href);\n                    }\n                }\n            });\n        });\n        // Send privacy policy URLs to background script\n        if (this.privacyPolicyUrls.length > 0) {\n            chrome.runtime.sendMessage({\n                action: 'privacyPoliciesFound',\n                urls: this.privacyPolicyUrls,\n                currentUrl: window.location.href\n            }).catch(error => {\n                console.log('Failed to send privacy policy URLs:', error);\n            });\n        }\n    }\n    injectTrackingDetector() {\n        // Inject script to detect client-side tracking\n        const script = document.createElement('script');\n        script.src = chrome.runtime.getURL('injected.js');\n        script.onload = function () {\n            // Remove the script element after loading\n            this.remove();\n        };\n        (document.head || document.documentElement).appendChild(script);\n    }\n    createGDPROptOutButton() {\n        // Create a floating button for GDPR opt-out\n        const button = document.createElement('div');\n        button.id = 'kavach-gdpr-button';\n        button.innerHTML = `\r\n      <div style=\"\r\n        position: fixed;\r\n        bottom: 20px;\r\n        right: 20px;\r\n        z-index: 10000;\r\n        background: #2563eb;\r\n        color: white;\r\n        padding: 12px 16px;\r\n        border-radius: 8px;\r\n        font-family: system-ui, -apple-system, sans-serif;\r\n        font-size: 14px;\r\n        cursor: pointer;\r\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n        transition: all 0.2s ease;\r\n      \" onmouseover=\"this.style.backgroundColor='#1d4ed8'\" \r\n         onmouseout=\"this.style.backgroundColor='#2563eb'\">\r\n        üõ°Ô∏è Quick Privacy Opt-out\r\n      </div>\r\n    `;\n        button.addEventListener('click', () => {\n            this.showOptOutDialog();\n        });\n        document.body.appendChild(button);\n    }\n    showOptOutDialog() {\n        const dialog = document.createElement('div');\n        dialog.innerHTML = `\r\n      <div style=\"\r\n        position: fixed;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n        background: rgba(0,0,0,0.5);\r\n        z-index: 10001;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n      \">\r\n        <div style=\"\r\n          background: white;\r\n          padding: 24px;\r\n          border-radius: 12px;\r\n          max-width: 400px;\r\n          margin: 20px;\r\n          box-shadow: 0 10px 25px rgba(0,0,0,0.2);\r\n        \">\r\n          <h3 style=\"margin: 0 0 16px 0; color: #1f2937;\">Privacy Rights</h3>\r\n          <p style=\"margin: 0 0 20px 0; color: #6b7280; line-height: 1.5;\">\r\n            Exercise your privacy rights under GDPR/CCPA. This will help you opt-out of data collection and tracking.\r\n          </p>\r\n          <div style=\"display: flex; gap: 12px; justify-content: flex-end;\">\r\n            <button id=\"kavach-cancel\" style=\"\r\n              padding: 8px 16px;\r\n              border: 1px solid #d1d5db;\r\n              background: white;\r\n              color: #374151;\r\n              border-radius: 6px;\r\n              cursor: pointer;\r\n            \">Cancel</button>\r\n            <button id=\"kavach-optout\" style=\"\r\n              padding: 8px 16px;\r\n              border: none;\r\n              background: #dc2626;\r\n              color: white;\r\n              border-radius: 6px;\r\n              cursor: pointer;\r\n            \">Opt Out</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\n        document.body.appendChild(dialog);\n        dialog.querySelector('#kavach-cancel')?.addEventListener('click', () => {\n            dialog.remove();\n        });\n        dialog.querySelector('#kavach-optout')?.addEventListener('click', () => {\n            this.performOptOut();\n            dialog.remove();\n        });\n    }\n    performOptOut() {\n        // Simulate GDPR/CCPA opt-out actions\n        const optOutActions = [\n            'document.cookie = \"gdpr_consent=false; path=/; max-age=31536000\"',\n            'document.cookie = \"ccpa_optout=true; path=/; max-age=31536000\"',\n            'localStorage.setItem(\"privacy_optout\", \"true\")',\n        ];\n        optOutActions.forEach(action => {\n            try {\n                eval(action);\n            }\n            catch (e) {\n                console.log('Opt-out action failed:', action);\n            }\n        });\n        // Show confirmation\n        const notification = document.createElement('div');\n        notification.innerHTML = `\r\n      <div style=\"\r\n        position: fixed;\r\n        top: 20px;\r\n        right: 20px;\r\n        z-index: 10002;\r\n        background: #10b981;\r\n        color: white;\r\n        padding: 12px 16px;\r\n        border-radius: 8px;\r\n        font-family: system-ui, -apple-system, sans-serif;\r\n        font-size: 14px;\r\n        box-shadow: 0 4px 12px rgba(0,0,0,0.15);\r\n      \">\r\n        ‚úÖ Privacy opt-out completed\r\n      </div>\r\n    `;\n        document.body.appendChild(notification);\n        setTimeout(() => notification.remove(), 3000);\n    }\n    init() {\n        // Initialize after DOM is ready\n        if (document.readyState === 'loading') {\n            document.addEventListener('DOMContentLoaded', () => {\n                setTimeout(() => {\n                    this.createGDPROptOutButton();\n                    // Re-scan for privacy policies after DOM is fully loaded\n                    this.detectPrivacyPolicies();\n                }, 1000);\n            });\n        }\n        else {\n            setTimeout(() => {\n                this.createGDPROptOutButton();\n                // Re-scan for privacy policies\n                this.detectPrivacyPolicies();\n            }, 1000);\n        }\n        // Also scan again after a delay to catch dynamically loaded content\n        setTimeout(() => {\n            this.detectPrivacyPolicies();\n        }, 3000);\n    }\n}\nconst contentScript = new ContentScript();\ncontentScript.init();\nexport {};\n"],"names":[],"sourceRoot":""}